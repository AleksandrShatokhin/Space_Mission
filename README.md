<a id="Start"></a>

![NameBaner](https://user-images.githubusercontent.com/47788812/166119592-ca3a4e64-09ea-47e8-866d-4613f9778337.png)

---

#### Это второй самостоятельный проект для портфолио.
#### Цель: научиться работать с Unity, программировать игровую логику на C#.
#### Описание: данный проект не нацелен на качество анимации, текстур, визуализации эффектов, а лишь на работу с кодом, возможность изучить лучшее ООП, Interface и различные возможности игрового процесса среды Unity, которые возможно реализовать через код и нетолько: игра-шутер от первого лица, возможность управлять камерой через мышку, стрельба из оружия от первого лица, простой AI для неигровых персонажей в том числе и с использованием NavMeshAgent.

---

__1. Описание игрового процесса__

Цель миссии заключается в спасении гражданских людей с космической базы заполненной космическими враждебными существами. 
У игрока имеется оружие с возможностью наносить одиночные выстрелы. Количество патронов ограничено. Однако на космической базе есть складское помещение, где располагаются в том числе и патроны, которыми важно восполнить боезапас. 
Гражданские разбежались по всей базе и прячутся от враждебных существ в разных уголках базы. Игроку предстоит пройтись по всем помещениям и найти всех гражданских людей. Всего на базе их трое. Дружеские персонажи, увидев игрока, начинают следовать за ним. Игроку предстоит сопроводить их до своего корабля, на котором он прибыл на космическую базу. Выведя всех гражданских уровень заканчивается.
Вражеские существа располагаются в разных помещениях базы. Всего на базе два вида вражеских существ: Enemy Blue и  Enemy Red. Первый может атаковать игрока только ближним боем при короткой дистанции, второй же может атаковать как ближним боем, так и дальним, кидая "файрболы" в игрока.

![MapShip](https://user-images.githubusercontent.com/47788812/161409850-beaca21f-c41c-4955-baa6-bdcfb32470ad.PNG)
_Карта космической базы, вид сверху_

Точка старта - космический корабль внизу карты. На карте три помещения и коридоры. В основном вражеские существа расположены в коридорах, гражданские же персонажи прячутся в помещениях (комнатах). Игроку предстоит осмотреть их все.

__2. Логика и механики__

* На сцене расположен GameObject с названием "Game", к которому прикреплен компонент GameController с применением паттерна "Singleton".

![CodeSingleton](https://user-images.githubusercontent.com/47788812/166121218-3811c6c3-c100-4811-b896-7ab64c5e90f9.PNG)

* Игрок может ходить, бегать, стрелять, перезаряжать свое оружие.
Движение производится клавишами WASD. Управление камерой производится движением мыши. Переход на бег происходит по удерживанию кнопки __LeftShift__ на клавиатуре. Перезарядка оружия происходит по нажатию кнопки __R__ на клавиатуре
При старте игры у игрока имеется __50__ патронов и еще __10__ уже заряженных в обойму. В обойме не может быть больше __10__ патронов, в подсумке не может быть белее __50__ патронов.

* Выстрел из оружия происходит по нажатию левой кнопки мыши. Создаем луч в центр экрана и в направлении центра пускаем пулю из оружия. У самой пули движение задается через физику - придаем толчок в направлении __Vector3.forward__.

![CodeShotPlayer](https://user-images.githubusercontent.com/47788812/166121510-7c973697-ada7-405b-8f7a-31e55875aa4d.PNG)

* У вражеских персонажей есть 2 варианта движения: "патрулирование" и преследование. Управляет переключением метот __FieldOfView()__, который находтся в классе __ControllerNPC__.

_Изображение структуры взаимодействие классов:_
![scheme](https://user-images.githubusercontent.com/47788812/166917447-40083137-52eb-4ca7-98ac-dbc3be7382f6.PNG)

* Через Interface реализую метод __Kill()__. Так как умереть может как любой NPC, так и игрок. Для простоты взаимодействия было принято решение использовать Interface.

![CodeInterface](https://user-images.githubusercontent.com/47788812/167145026-f234e833-d68e-480f-8035-9b578146edf9.PNG)

* В __PlayerController__ и в __ControllerNPC__ классах происходит реализация данного интерфейса через дополнительный компонент на игровых объектах __HealthComponent__. Этот класс в свою очередь отвечает за здоровье игровых объектов и при нулевом или отрицательном значении здоровья обращается к объекту, на котором этот класс размещен, и вызывает метод __Kill()__ через Interface.

![CodeHealth](https://user-images.githubusercontent.com/47788812/167146172-792619f9-037a-419f-af53-8fdf46cf358c.PNG)

* В классе ContrlollerNPC описывается метод __FieldOfFiew()__, так как любой неигровой персонаж может видеть или не видеть игрока. Что в свою очередь важно для построения дальнейшей логики персонажей. 

![CodeFOV](https://user-images.githubusercontent.com/47788812/167148359-8249b9c7-88ad-4ca2-8e4a-981fee6a6710.PNG)

* Данный класс передает в наследование возможность иметь угол обзора с целью увидеть игрока как дружеским персонажам, так и вражеским персонажам. В классе __EnemyManager__ описываются методы, которые необходимы именно вражеским персонажам: "патрулирование", преследование игрока, атака рукой. Именно такие возможности имеют оба варианта вражеских существ. Класс __EnemyBlue__, так как данный персонаж заточен только на ближнюю атаку, реализует, в зависимости от ситуации, только методы из родительского класса. А класс __EnemyRed__, так как данный вариант вражеского персонажа задуман, как и "дальник" в атаке, описывает и реализует, помимо методов родительских, метод дальней атаки - бросок "файрбола" в игрока. Так же не исключен вариант и атаки рукой, если игрок на расстоянии удара. 

* Класс __FriendlyManager__ описывает метод следования за игроком. Логика дружеского персонажа определена таким образом, что персонажи прячутся и как только видят игрока "радостно" бегут за ним в надежде на спасение. А класс __FriendlyController__ реализует метод описанный в классе родителе. 

__Таким образом структура игровой логики - описываем методы, которые присуще всем персонажам, в главном классе, от него делимся в два направления (дружеские персонажи и персонажи вражеские), описываем методы, необходимые тому и иному варианту персонажей, соответственно, и реализуем все методы в дочерних классах, которые размещаются на игровых объектах в сцене игры.__

_Более подробно со всеми сценариями можно ознакомиться в Assets. Все скрипты размещены в папке Scripts. Делее для удобства размещение файлов разделено по папкам в зависимости от их принадлежности._

__3. Краткое примечание__

Для разработки использовались бесплатные модели из Assetstore. Звуки также были взяты из открытых источников сети интернета. Данный проект в первую очередь направлен на обучение и не планируется использоваться в коммерческих целях. Основная цель - работа с кодом!

__4. Скачивание__

Прототип данного проекта был размещен на платформе itch.io для удобства его просмотра.
Ссылка на страницу с игрой [тут](https://aleksandrshatokhin.itch.io/space-mission).

[Вернуться в начало](#Start)